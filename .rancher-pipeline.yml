stages:
- name: Build
  steps:
  - publishImageConfig:
      dockerfilePath: ./Multi_Page_WebApp/services/flask/Dockerfile
      buildContext: Multi_Page_WebApp
      tag: netcdf_editor_flask_app:${CICD_EXECUTION_SEQUENCE}
  - publishImageConfig:
      dockerfilePath: ./Multi_Page_WebApp/services/panel/Dockerfile
      buildContext: Multi_Page_WebApp
      tag: netcdf_editor_panel_app:${CICD_EXECUTION_SEQUENCE}
  - publishImageConfig:
      dockerfilePath: ./Multi_Page_WebApp/services/nginx/Dockerfile
      buildContext: ./Multi_Page_WebApp/services/nginx
      tag: netcdf_editor_nginx_app:${CICD_EXECUTION_SEQUENCE}
- name: Deploy
  steps:
  - applyYamlConfig:
      path: ./deployment.yaml
branch:
  include:
  - main
  - flask
  - flask-docker-refactor
  exclude:
  - gh-pages
notification: {}
